<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Server Browser</title>
		<!-- Includes -->
		<script src="js/handlebars.min.js"></script>
		<script src="js/jquery-1.11.3.min.js"></script>
		<!-- Bootstrap -->
		<link rel="stylesheet" href="css/bootstrap.min.css">
		<link rel="stylesheet" href="css/bootstrap-theme.min.css">
		<script src="js/bootstrap.min.js"></script>
		<!-- DataTables -->
		<link rel="stylesheet" href="css/jquery.dataTables.min.css">
		<script src="js/jquery.dataTables.min.js"></script>
		<script src="js/mousetrap.min.js"></script>
		<!-- Sweet Alert -->
        <script src="js/sweetalert.min.js"></script> 
        <link rel="stylesheet" type="text/css" href="css/sweetalert.css">       
        <link rel="stylesheet" type="text/css" href="css/eldorito.css">
        <!-- Gamepad support -->
        <script src="js/gamepad.js"></script>
		<!-- Eldorito Stuff -->
		<script src="js/dewRcon.js"></script>
		<!-- Custom stuff -->
		<script src="js/browser.js"></script>
		<link rel="stylesheet" href="css/browser.css">
        <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
        <link rel="icon" href="favicon.ico" type="image/x-icon">
</head>

<body>
	<h3 class="browserTitle"><b>Server Browser</b></h3>
	<h4 class="serverStats"><span class="playerCount">00 players</span>  /  <span class="serverCount">00 servers</span></h4>
    <button class="refresh" onclick="refreshTable();">Refresh<img class="controllerButton" src="images/XboxOne_Y.png"></button>
	<button class="closeButton" onclick="closeBrowser();">Close<img class="controllerButton" src="images/XboxOne_Windows.png"></button>
    <!--<div id="connectionStatus"></div>-->
    <table id="serverTable" class="display" width="100%"></table>
    <div id="gamecard">
    </div>
    <div id="extBorder">
    <div id="extBorder2">
    </div>
    </div>
    
    <script id="gameinfo-template" type="text/x-handlebars-template">
        <div id="cardheaderborder">
            <div id="cardheader">
                <div id="title"><b>{{capitalize variantType}} on {{map}}</b></div>
                <img id="mappic" src="images/maps/{{mapFile}}.png" onError="this.onerror=null;this.src='images/maps/mainmenu.png';">
                <img id="varpic" src="images/gametypes/{{capitalize variantType}}.png">
            </div>
        </div>
        <div id="scoreboard">
            {{#if passworded}}
                <b>Private Game</b>
                {{else}}
                    <table class="statBreakdown">
                        <thead class="tableHeader">
                            <th>Name</th>
                            <th><center>Score</center></th>
                            <th><center>K</center></th>
                            <th><center>D</center></th>
                            <th><center>A</center></th>
                        </thead>
                        <tbody>
                            {{#eachByScore players}}
                            {{#if name}}
                            <tr>
                                <td class="statLines">{{this.name}}</td>
                                <td class="statLines"><center>{{score}}</center></td>
                                <td class="statLines"><center>{{kills}}</center></td>
                                <td class="statLines"><center>{{deaths}}</center></td>
                                <td class="statLines"><center>{{assists}}</center></td>
                            </tr>
                            {{/if}}
                            {{/eachByScore}}
                        </tbody>
                    </table>
                {{/if}}
        </div>
        <div id="gameinfoborder">
            <div id="gameinfo">
                <div id="host"><b>Host: </b>{{hostPlayer}}</div>
                <div id="name"><b>Name: </b>{{name}}</div>
                <div id="voip"><b>VoIP: </b>
                    {{#if VoIP}} 
                        Enabled
                    {{else}}
                        Disabled
                    {{/if}}                             
                </div>
                <div id="sprint"><b>Sprint: </b>
                    {{#ifCond sprintEnabled "1"}}
                        {{#ifCond sprintUnlimitedEnabled "1"}}
                            Unlimited
                        {{else}}
                            Enabled
                        {{/ifCond}}  
                    {{else}}
                        Disabled
                    {{/ifCond}}  
                </div>
                <div id="status"><b>Status: </b>
                    {{#ifCond status "InGame"}}
                        In Game
                    {{else}}
                        In Lobby
                    {{/ifCond}}   
                </div>
                <div id="ip"><b>IP: </b>{{serverIP}}</div>
                <div id="version"><b>Version: </b>{{eldewritoVersion}}</div>
            </div>
        </div>
	</script>
    
    <script>
		var serverTemplateSource = $("#gameinfo-template").html();
		var serverTemplate = Handlebars.compile(serverTemplateSource);
	</script>    
</body>
</html>
